name: Setup devenv

description: Setup a devenv environment.

runs:
  using: composite
  steps:

  - name: Checkout repository
    uses: actions/checkout@v4

  - name: Install Nix
    uses: cachix/install-nix-action@v26
    with:
      github_access_token: ${{ secrets.GITHUB_TOKEN }}

  - name: Setup devenv cache
    uses: cachix/cachix-action@v14
    with:
      name: devenv

  - name: Install devenv.sh
    shell: bash
    run: nix profile install nixpkgs#devenv
